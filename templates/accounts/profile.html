{% extends 'base.html' %}

{% block title %}{{ request.user.username }} - Profile | TBZ Blogs{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <!-- Sidebar - Profile Info -->
        <div class="col-lg-4 mb-4">
            <div class="card border-0 shadow-lg">
                <div class="card-body text-center">
                    <!-- Profile Image -->
                    {% if profile.profile_image %}
                        <img src="{{ profile.profile_image.url }}" alt="{{ user.username }}" 
                             class="rounded-circle mb-3" width="120" height="120" style="object-fit: cover;">
                    {% else %}
                        <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center mb-3" 
                             style="width: 120px; height: 120px; margin: 0 auto;">
                            <i class="bi bi-person display-4 text-white"></i>
                        </div>
                    {% endif %}

                    <!-- User Info -->
                    <h4 class="card-title">{{ profile.get_full_name }}</h4>
                    <p class="text-muted">@{{ user.username }}</p>
                    <p class="small">{{ profile.bio }}</p>

                    <!-- Statistics -->
                    <div class="row text-center mt-4">
                        <div class="col-6 border-end border-secondary">
                            <h6 class="text-primary">{{ blog_posts }}</h6>
                            <small class="text-muted">Posts</small>
                        </div>
                        <div class="col-6">
                            <h6 class="text-success">{{ profile.follower_count }}</h6>
                            <small class="text-muted">Followers</small>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    {% if is_own_profile %}
                    <div class="mt-4 d-flex gap-2">
                        <a href="{% url 'profile_edit' %}" class="btn btn-sm btn-primary flex-grow-1">
                            <i class="bi bi-pencil"></i> Edit Profile
                        </a>
                        <a href="{% url 'change_password' %}" class="btn btn-sm btn-outline-secondary flex-grow-1">
                            <i class="bi bi-key"></i> Password
                        </a>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Account Info Card -->
            <div class="card border-0 shadow-lg mt-4">
                <div class="card-body">
                    <h6 class="card-title mb-3">Account Information</h6>
                    <div class="mb-3">
                        <small class="text-muted d-block">Email</small>
                        <span>{{ user.email }}</span>
                    </div>
                    <div class="mb-3">
                        <small class="text-muted d-block">Joined</small>
                        <span>{{ profile.created_at|date:"M d, Y" }}</span>
                    </div>
                    <div class="mb-3">
                        <small class="text-muted d-block">Last Updated</small>
                        <span>{{ profile.updated_at|date:"M d, Y" }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="col-lg-8">
            <!-- Statistics Cards -->
            <div class="row mb-4">
                <div class="col-md-4">
                    <div class="card bg-gradient border-0 text-center">
                        <div class="card-body py-4">
                            <i class="bi bi-file-earmark-text display-5 text-primary mb-3"></i>
                            <h6 class="card-title">Published Posts</h6>
                            <h3>{{ blog_posts }}</h3>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card bg-gradient border-0 text-center">
                        <div class="card-body py-4">
                            <i class="bi bi-heart display-5 text-danger mb-3"></i>
                            <h6 class="card-title">Total Likes</h6>
                            <h3>{{ total_likes }}</h3>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card bg-gradient border-0 text-center">
                        <div class="card-body py-4">
                            <i class="bi bi-chat-left display-5 text-info mb-3"></i>
                            <h6 class="card-title">Total Comments</h6>
                            <h3>{{ total_comments }}</h3>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            {% if is_own_profile %}
            <div class="card border-0 shadow-lg">
                <div class="card-body">
                    <h5 class="card-title mb-4">Quick Actions</h5>
                    <div class="row g-2">
                        <div class="col-md-6">
                            <a href="{% url 'blog_create' %}" class="btn btn-primary w-100">
                                <i class="bi bi-plus-circle"></i> Create New Post
                            </a>
                        </div>
                        <div class="col-md-6">
                            <a href="{% url 'my_blogs' %}" class="btn btn-outline-primary w-100">
                                <i class="bi bi-speedometer2"></i> View Dashboard
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Recent Activity -->
            {% if is_own_profile %}
            <div class="card border-0 shadow-lg mt-4">
                <div class="card-body">
                    <h5 class="card-title mb-4">Recent Activity</h5>
                    <p class="text-muted small">
                        <i class="bi bi-info-circle"></i> 
                        Your recent blog posts and interactions will appear here.
                    </p>
                    <div class="alert alert-info" role="alert">
                        <strong>Coming Soon!</strong> We're working on displaying your recent activity.
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
